buildscript {
    repositories {
        mavenLocal()
        jcenter()
    }
    dependencies {
        classpath 'org.almibe:easy-pub-plugin:0.3.0'
        classpath 'org.libraryweasel:library-weasel-gradle-plugin:0.4.0-SNAPSHOT'
    }
}

apply plugin: 'org.almibe.easypubplugin'
apply plugin: 'org.libraryweasel.gradleplugin'

group 'org.libraryweasel'
version '0.1.0-SNAPSHOT'

dependencies {
    compile pluginDeps.sparkDep
    compile pluginDeps.slf4jApiDep
    compile pluginDeps.kotlinDep
    compile pluginDeps.gsonDep
}

task parcel(type: Exec) {
    workingDir "parcel"
    commandLine "npm", "run", "build"
}

task copyParcel(type: Copy) {
    from 'parcel/dist'
    into 'build/resources/main/public'
}

tasks.jar.dependsOn(copyParcel)
tasks.copyParcel.dependsOn(parcel)
