buildscript {
    repositories {
        mavenCentral()
        mavenLocal()
    }
    dependencies {
        classpath 'org.libraryweasel:library-weasel-gradle-plugin:0.0.1-SNAPSHOT'
    }
}

apply plugin: 'org.libraryweasel.gradleplugin'

group 'org.libraryweasel'
version '0.1.0-SNAPSHOT'

dependencies {
    compile kotlinDep
    compile libraryWeaselVertxApiDep
    compile libraryWeaselServoDep
}

bundle {
    instruction 'Import-Package', '*'
    instruction 'Export-Package', 'org.libraryweasel.music.api'
    instruction 'Bundle-Activator', 'org.libraryweasel.music.Activator'
}

task webpack(type: Exec) {
    workingDir "webpack"
    commandLine "npm", "run", "dev"
}

task copyWebpack(type: Copy) {
    from 'webpack/dist'
    into 'build/resources/main/public'
}

tasks.jar.dependsOn(copyWebpack)
tasks.copyWebpack.dependsOn(webpack)
